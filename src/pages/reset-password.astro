---
import AuthLayout from "../layouts/AuthLayout.astro";
import { RequestPasswordResetForm } from "../components/auth/RequestPasswordResetForm";
import { SetNewPasswordForm } from "../components/auth/SetNewPasswordForm";

const token = Astro.url.searchParams.get("token");

// TODO: Po implementacji backendu - sprawdzenie ważności tokena
// if (token) {
//   // Validate token server-side
//   // const isValid = await validateResetToken(token);
//   // if (!isValid) {
//   //   // Token invalid - show error and request form
//   //   token = null;
//   // }
// }
---

<AuthLayout title={token ? "Ustaw nowe hasło - DailyPath" : "Reset hasła - DailyPath"}>
  {token ? <SetNewPasswordForm client:load token={token} /> : <RequestPasswordResetForm client:load />}
</AuthLayout>
